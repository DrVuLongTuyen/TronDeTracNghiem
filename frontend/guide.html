<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="logo.png" type="image/png">
    <meta property="og:title" content="Trộn Đề Trắc Nghiệm Thông Minh">
    <meta property="og:description" content="Nền tảng tạo đề hoán vị và đáp án tự động. Nhanh chóng, an toàn và miễn phí.">
    <meta property="og:image" content="https://trondetn.vltuyen.com/logo.png">
    <meta property="og:url" content="https://trondetn.vltuyen.com">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <title>Hướng dẫn sử dụng - Trộn Đề TN</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body { background-color: #fff; }
        .container { max-width: 800px; box-shadow: none; border: 1px solid #eee; }
        h2 { border-bottom: 2px solid #007bff; padding-bottom: 5px; color: #007bff; }
        h3 { color: #333; }
        pre {
            background-color: #f4f4f4;
            border-left: 4px solid #007bff;
            padding: 15px;
            margin: 10px 0;
            font-family: "Courier New", Courier, monospace;
            white-space: pre-wrap; /* Xuống dòng khi cần */
            font-size: 14px;
        }
        .nav-link {
            display: inline-block;
            margin-bottom: 20px;
            font-weight: bold;
            text-decoration: none;
            color: #007bff;
        }
        .nav-link:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="container">
        <a href="dashboard.html" class="nav-link">&larr; Quay lại Bảng điều khiển</a>

        <h1 style="text-align: center;">Hướng dẫn sử dụng - Trộn Đề Trắc Nghiệm</h1>

        <h2>1. Các tính năng chính (Phiên bản V21)</h2>
        <ul>
            <li><strong>Xác thực Người dùng:</strong> Đăng ký, Đăng nhập, và Tự động quản lý phiên làm việc.</li>
            <li><strong>Upload Đề gốc:</strong> Tải lên tệp <code>.docx</code> chứa ngân hàng câu hỏi.</li>
            <li><strong>Phân tích & Lưu trữ:</strong> Hệ thống tự động đọc tệp Word, phân tích câu hỏi/đáp án và lưu vào CSDL Supabase cá nhân của bạn.</li>
            <li><strong>Hiển thị Kho câu hỏi:</strong> Tự động tải và hiển thị danh sách câu hỏi hiện có trong CSDL của bạn.</li>
            <li><strong>Quản lý Kho:</strong> Xóa toàn bộ câu hỏi cũ để chuẩn bị cho bộ đề mới.</li>
            <li><strong>Tùy chỉnh Tiêu đề:</strong> Cho phép nhập Tên trường, Tên kỳ thi, Lớp, v.v. để chèn vào file Word.</li>
            <li><strong>Tùy chỉnh Logo (MỚI):</strong> Cung cấp 3 tùy chọn:
                <ol>
                    <li>Bỏ trống (không chèn logo).</li>
                    <li>Dùng logo mặc định (<code>logo_default.png</code>).</li>
                    <li>Tải lên logo tùy chỉnh của riêng bạn (2cm x 2cm, căn giữa).</li>
                </ol>
            </li>
            <li><strong>Trộn đề & Xuất tệp:</strong> Tạo ra nhiều mã đề (tối đa 5) dưới dạng file <code>.zip</code>, bao gồm các tệp <code>.docx</code> (đề thi) và 1 tệp <code>.docx</code> (phiếu đáp án tổng hợp).</li>
            <li><strong>Đánh thức Máy chủ (MỚI):</strong> Tự động "đánh thức" máy chủ Backend (Render) và CSDL (Supabase) khi bạn thực hiện tác vụ, tránh lỗi "treo" 10 phút.</li>
        </ul>

        <h2>2. Quy trình làm việc</h2>
        <h3>Bước 1: Đăng nhập (hoặc Đăng ký)</h3>
        <p>Truy cập trang web, nếu chưa có tài khoản, vui lòng Đăng ký. Bạn sẽ cần xác thực email (kiểm tra hộp thư Spam) trước khi Đăng nhập.</p>
        
        <h3>Bước 2: Tải lên Đề gốc</h3>
        <p>Tại Khu vực 1, nhấn "Xóa toàn bộ kho câu hỏi cũ" (nếu cần). Sau đó, chọn tệp <code>.docx</code> đã được định dạng (xem mục 3) và nhấn "Tải lên và xử lý".</p>
        
        <h3>Bước 3: Xem lại Kho câu hỏi</h3>
        <p>Sau khi tải lên thành công, danh sách câu hỏi (phía dưới nút Tải lên) sẽ tự động được làm mới. Bạn có thể kiểm tra xem các câu hỏi và thẻ nhóm (tag) đã vào đúng chưa.</p>

        <h3>Bước 4: Tùy chỉnh Tiêu đề & Logo</h3>
        <p>Điền các thông tin Tên trường, Tên kỳ thi... tại Khu vực 2.</p>
        <p>Tại Khu vực 3, chọn 1 trong 2 tùy chọn logo. Nếu bạn chọn "Dùng logo...", bạn có thể tải lên tệp <code>.png</code> hoặc <code>.jpg</code> của riêng mình (nếu không tải, hệ thống sẽ dùng <code>logo_default.png</code>).</p>

        <h3>Bước 5: Trộn đề</h3>
        <p>Tại Khu vực 4, nhập số lượng đề cần tạo (ví dụ: 4) và Tên tệp tin (ví dụ: VLT).</p>
        <p>Nhấn "Bắt đầu trộn đề". Lần đầu tiên trong ngày, bạn có thể phải đợi 1-2 phút để máy chủ "Đánh thức". Sau khi trộn xong, nút "Tải về (.zip)" sẽ xuất hiện.</p>

        <h2>3. Hướng dẫn Định dạng tệp Đề Gốc (.docx)</h2>
        <p style="color: red; font-weight: bold;">Đây là bước QUAN TRỌNG NHẤT. Để hệ thống có thể đọc hiểu tệp, bạn phải tuân thủ CHÍNH XÁC các quy tắc sau:</p>

        <h3>Quy tắc 1: Thẻ Nhóm (Group Tag)</h3>
        <p>Hệ thống dùng các thẻ đặc biệt (viết trên một dòng riêng) để phân loại các nhóm câu hỏi:</p>
        <ul>
            <li><code>&lt;g0&gt;</code>: <strong>Nhóm không trộn</strong>. (Ví dụ: Các câu hỏi của bài nghe, đọc hiểu).</li>
            <li><code>&lt;g1&gt;</code>: <strong>Nhóm chỉ hoán vị câu hỏi</strong>.</li>
            <li><code>&lt;g2&gt;</code>: <strong>Nhóm chỉ hoán vị đáp án</strong>.</li>
            <li><code>&lt;g3&gt;</code>: <strong>Nhóm hoán vị cả câu hỏi và đáp án</strong> (phổ biến nhất).</li>
        </ul>
        <p><i>Lưu ý: Nếu bạn không cung cấp thẻ nhóm nào, hệ thống sẽ tự động coi tất cả là <code>&lt;g3&gt;</code>.</i></p>

        <h3>Quy tắc 2: Câu hỏi</h3>
        <p>Mỗi câu hỏi phải bắt đầu bằng chữ <code>Câu </code> (có dấu cách) và số thứ tự. Câu hỏi có thể kéo dài nhiều dòng.</p>
        <pre>Câu 1: Trái đất hình gì?</pre>
        <pre>Câu 2: Bệnh nhân G được bác sĩ khuyên nên thực hiện liệu pháp hóa trị cho bệnh ung thư.
Tuy nhiên, sau khi tư vấn, bệnh nhân và người thân từ chối...</pre>


        <h3>Quy tắc 3: Đáp án</h3>
        <p>Các đáp án phải nằm ngay dưới câu hỏi và phải bắt đầu bằng <code>A.</code>, <code>B.</code>, <code>C.</code>, <code>D.</code> (chữ hoa, có dấu chấm).</p>
        <pre>A. Hình tròn
B. Hình vuông
C. Hình cầu
D. Hình tam giác</pre>

        <h3>Quy tắc 4: Đáp án đúng (Rất quan trọng)</h3>
        <p>Để đánh dấu đâu là đáp án đúng, bạn <strong>BẮT BUỘC</strong> phải dùng tính năng <strong>Gạch chân (Underline)</strong> của Microsoft Word.</p>
        <p>Bạn có thể chỉ gạch chân chữ cái đầu (ví dụ: <code><u>A.</u></code>) hoặc gạch chân cả dòng đáp án.</p>
        <pre>A. Hình tròn
B. Hình vuông
<u>C. Hình cầu</u>
D. Hình tam giác</pre>
        
        <h3>Ví dụ tệp .docx hợp lệ:</h3>
        <pre>
&lt;g3&gt;
Câu 1. Bào quan nào sau đây trực tiếp tham gia quá trình tiêu hóa nội bào?
A. Ribosome.
B. Nhân.
<u>C. Lysosome.</u>
D. Bộ máy Golgi.

&lt;g1&gt;
Câu 2. Bào quan nào sau đây là túi chứa sắc tố?
<u>A. Không bào.</u>
B. Nhân.
C. Lysosome.
D. Lục lạp.
</pre>

        <h2>4. Xử lý sự cố (Troubleshooting)</h2>
        <ul>
            <li><strong>Lỗi: "Treo" 5-10 phút khi nhấn nút?</strong>
                <br>Đây là lỗi "Crash Loop" (Quá tải RAM hoặc Sai Key) ở phiên bản cũ. Bản V23 đã khắc phục. Nếu vẫn bị, vui lòng kiểm tra lại <strong>Biến Môi trường</strong> (<code>SUPABASE_URL</code>, <code>SUPABASE_KEY</code>) trên Render.
            </li>
            
            <li><strong>Lỗi: "Lỗi tải logo: new row violates row-level security policy"?</strong>
                <br>Bạn chưa chạy 3 câu lệnh SQL (Chính sách Bảo mật) cho Supabase Storage. Vui lòng xem lại Bước 6a (V22) của chúng ta.
            </li>

            <li><strong>Lỗi: "Lỗi: Không tìm thấy câu hỏi hợp lệ trong tệp."?</strong>
                <br>Tệp <code>.docx</code> của bạn đã định dạng sai. Vui lòng kiểm tra lại 4 quy tắc ở mục 3 (Thiếu <code>Câu X:</code>, sai <code>A.</code>, hoặc quên <strong>gạch chân</strong> đáp án đúng).
            </li>
        </ul>

        <hr style="border: 0; border-top: 1px solid #eee; margin: 20px 0;">
        <a href="dashboard.html" class="nav-link">&larr; Quay lại Bảng điều khiển</a>

    </div>
</body>
</html>
